// scotch
!function(t){"use strict";var e=[],s=!1,n=!1,i=!1,a={containerSelector:"body",type:"html",direction:"top",duration:300,transition:"ease",easingPluginTransition:"easeInCirc",useCSS:!0,useEasingPlugin:!1,imageURL:!1,iframeURL:!1,autoPlayVideo:!0,youtubeID:!1,youTubeTheme:"light",distanceX:"70%",forceMinHeight:!1,minHeight:"200px",closeAfter:0,startOpened:!1,startOpenedDelay:0,clickSelector:!1,enableEscapeKey:!0,hoverSelector:!1,touchSelector:!1,beforePanelOpen:function(){},afterPanelOpen:function(){},beforePanelClose:function(){},afterPanelClose:function(){}};t.fn.scotchPanel=function(o){if("undefined"==typeof o&&(o={}),0===this.length)return this;if(this.length>1)return this.each(function(){e.push(t(this).scotchPanel(o))}),e.open=function(){for(var t=0;t<e.length;t++)e[t].open()},e.close=function(){for(var t=0;t<e.length;t++)e[t].close()},e.toggle=function(){for(var t=0;t<e.length;t++)e[t].toggle()},e;var r={};r=this;var c=function(){s||(s=!0,n=g.transition(),i=g.translate3d());for(var e in a)a.hasOwnProperty(e)&&r.attr("data-"+e.toLowerCase())&&(o[e]=r.data(e.toLowerCase()));r.settings=t.extend({},a,o),l()},l=function(){var e=t(r.settings.containerSelector);e.hasClass("scotchified")||e.wrapInner('<div class="scotch-panel-wrapper"><div class="scotch-panel-canvas"></div></div>').addClass("scotchified"),t(".scotch-panel-wrapper").css({position:"relative",overflow:"hidden",width:"100%"}),t(".scotch-panel-canvas").css({position:"relative",height:"100%",width:"100%"}),r.settings.useCSS&&t(".scotch-panel-canvas").css({"-moz-transform":"translate3d(0, 0, 0)","-ms-transform":"translate3d(0, 0, 0)","-o-transform":"translate3d(0, 0, 0)","-webkit-transform":"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","-o-backface-visibility":"hidden","-webkit-backface-visibility":"hidden","backface-visibility":"hidden"}),"top"==r.settings.direction&&(r.height=r.height(),r.addClass("scotch-panel-top"),r.css({bottom:"100%",left:"0",width:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})),"bottom"==r.settings.direction&&(r.height=r.height(),r.addClass("scotch-panel-bottom"),r.css({top:"100%",left:"0",width:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})),"left"==r.settings.direction&&(r.addClass("scotch-panel-left"),r.css({top:"0",left:"-"+r.settings.distanceX,width:r.settings.distanceX,height:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})),"right"==r.settings.direction&&(r.addClass("scotch-panel-right"),r.css({top:"0",right:"-"+r.settings.distanceX,width:r.settings.distanceX,height:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})),r.css({"-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","-o-backface-visibility":"hidden","-webkit-backface-visibility":"hidden","backface-visibility":"hidden"}),"image"==r.settings.type&&r.settings.imageURL&&(r.css({"-o-background-size":"cover","-ms-background-size":"cover","-moz-background-size":"cover","-webkit-background-size":"cover","background-size":"cover","background-position":"50% 0","background-repeat":"no-repeat","background-image":"url("+r.settings.imageURL+")"}),("top"==r.settings.direction||"bottom"==r.settings.direction)&&(r.css("min-height",r.settings.minHeight),r.height=t(r).height())),"iframe"==r.settings.type&&r.settings.iframeURL&&(r.iframeIsLoaded=!1,r.append('<iframe frameborder="0" style="width: 100%; height: 100%; display: block; position: relative; min-height: '+r.settings.minHeight+'" allowfullscreen></iframe>'),("top"==r.settings.direction||"bottom"==r.settings.direction)&&(r.height=t(r).height())),"video"==r.settings.type&&r.settings.youtubeID&&(r.append('<div id="video-id-'+r.settings.youtubeID+'" style="min-height: '+r.settings.minHeight+'; display: block !important;"><iframe src="//www.youtube.com/embed/'+r.settings.youtubeID+"?enablejsapi=1&theme="+r.settings.youTubeTheme+'" frameborder="0" style="width: 100%; height: 100%; display: block; position: absolute; left: 0; top: 0;" allowfullscreen></iframe></div>'),("top"==r.settings.direction||"bottom"==r.settings.direction)&&(r.height=t(r).height())),n&&i&&h(r.settings.transition,r.settings.duration),r.settings.startOpened&&setTimeout(function(){r.open()},r.settings.startOpenedDelay),0!=r.settings.closeAfter&&setTimeout(function(){r.close()},r.settings.closeAfter)},g={transition:function(){if(!window.getComputedStyle)return!1;var t=document.body||document.documentElement,e=t.style,s="transition";if("string"==typeof e[s])return!0;var n=["Moz","webkit","Webkit","Khtml","O","ms"];s=s.charAt(0).toUpperCase()+s.substr(1);for(var i=0;i<n.length;i++)if("string"==typeof e[n[i]+s])return!0;return!1},translate3d:function(){if(!window.getComputedStyle)return!1;var t,e;return t=document.createElement("p"),t.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)",t.style.margin="0",document.body.insertBefore(t,document.body.lastChild),e=window.getComputedStyle(t).getPropertyValue("transform"),void 0!==e?"none"!==e:!1}},d=function(t,e){var s=document.getElementById(t),n=s.getElementsByTagName("iframe")[0].contentWindow;s.style.display="hide"==e?"none":"";var i="hide"==e?"pauseVideo":"playVideo";n.postMessage('{"event":"command","func":"'+i+'","args":""}',"*"),s.style.display="block"},h=function(t,e){r.parents(".scotch-panel-canvas:first").css({"-ms-transition":"all "+e+"ms "+t,"-moz-transition":"all "+e+"ms "+t,"-o-transition":"all "+e+"ms "+t,"-webkit-transition":"all "+e+"ms "+t,transition:"all "+e+"ms "+t})},f=function(t){r.settings.forceMinHeight&&r.parents(".scotch-panel-canvas:first").css("min-height",t),n&&i&&r.settings.useCSS?(r.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?r.settings.beforePanelOpen():r.settings.beforePanelClose(),r.parents(".scotch-panel-canvas:first").css({"-ms-transform":"translate3d(0, "+t+"px, 0)","-moz-transform":"translate3d(0, "+t+"px, 0)","-o-transform":"translate3d(0, "+t+"px, 0)","-webkit-transform":"translate3d(0, "+t+"px, 0)",transform:"translate3d(0, "+t+"px, 0)"}),setTimeout(function(){r.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?r.settings.afterPanelOpen():r.settings.afterPanelClose()},r.settings.duration)):(r.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?r.settings.beforePanelOpen():r.settings.beforePanelClose(),r.settings.useEasingPlugin?r.parents(".scotch-panel-canvas:first").animate({top:t+"px"},{duration:r.settings.duration,easing:r.settings.easingPluginTransition,complete:function(){r.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?r.settings.afterPanelOpen():r.settings.afterPanelClose()}}):r.parents(".scotch-panel-canvas:first").animate({top:t+"px"},r.settings.duration,function(){r.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?r.settings.afterPanelOpen():r.settings.afterPanelClose()}))},p=function(t){n&&i&&r.settings.useCSS?(r.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?r.settings.beforePanelOpen():r.settings.beforePanelClose(),r.parents(".scotch-panel-canvas:first").css({"-ms-transform":"translate3d("+t+", 0, 0)","-moz-transform":"translate3d("+t+", 0, 0)","-o-transform":"translate3d("+t+", 0, 0)","-webkit-transform":"translate3d("+t+", 0, 0)",transform:"translate3d("+t+", 0, 0)"}),setTimeout(function(){r.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?r.settings.afterPanelOpen():r.settings.afterPanelClose()},r.settings.duration)):(r.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?r.settings.beforePanelOpen():r.settings.beforePanelClose(),r.settings.useEasingPlugin?r.parents(".scotch-panel-canvas:first").animate({left:t},{duration:r.settings.duration,easing:r.settings.easingPluginTransition,complete:function(){r.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?r.settings.afterPanelOpen():r.settings.afterPanelClose()}}):r.parents(".scotch-panel-canvas:first").animate({left:t},r.settings.duration,function(){r.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?r.settings.afterPanelOpen():r.settings.afterPanelClose()}))};return r.open=function(){r.parents(".scotch-panel-canvas:first").addClass("scotch-is-showing"),"iframe"==r.settings.type&&r.settings.iframeURL&&!r.iframeIsLoaded&&(r.iframeIsLoaded=!0,r.find("iframe").attr("src",r.settings.iframeURL)),"video"==r.settings.type&&r.settings.youtubeID&&r.settings.autoPlayVideo&&d("video-id-"+r.settings.youtubeID,""),"top"==r.settings.direction&&f(r.height),"bottom"==r.settings.direction&&f("-"+r.height),"left"==r.settings.direction&&p(r.settings.distanceX),"right"==r.settings.direction&&p("-"+r.settings.distanceX)},r.close=function(){r.parents(".scotch-panel-canvas:first").removeClass("scotch-is-showing"),setTimeout(function(){"video"==r.settings.type&&r.settings.youtubeID&&r.settings.autoPlayVideo&&d("video-id-"+r.settings.youtubeID,"hide")},r.settings.duration),("top"==r.settings.direction||"bottom"==r.settings.direction)&&f(0),("left"==r.settings.direction||"right"==r.settings.direction)&&p(0)},r.toggle=function(){r.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?r.close():r.open()},c(),t(document).keyup(function(t){27==t.keyCode&&r.settings.enableEscapeKey&&r.close()}),r.settings.hoverSelector&&t(r.settings.hoverSelector).hover(function(){r.open()},function(){r.close()}),r.settings.clickSelector&&t(r.settings.clickSelector).click(function(){return r.toggle(),!1}),r.settings.touchSelector&&t(r.settings.touchSelector).on("touchstart",function(){return r.toggle(),!1}),r}}(jQuery);
// image lightbox
;(function(e,t,n,r){"use strict";var i=function(){var e=n.body||n.documentElement,e=e.style;if(e.WebkitTransition=="")return"-webkit-";if(e.MozTransition=="")return"-moz-";if(e.OTransition=="")return"-o-";if(e.transition=="")return"";return false},s=i()===false?false:true,o=function(e,t,n){var r={},s=i();r[s+"transform"]="translateX("+t+")";r[s+"transition"]=s+"transform "+n+"s linear";e.css(r)},u="ontouchstart"in t,a=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,f=function(e){if(u)return true;if(!a||typeof e==="undefined"||typeof e.pointerType==="undefined")return false;if(typeof e.MSPOINTER_TYPE_MOUSE!=="undefined"){if(e.MSPOINTER_TYPE_MOUSE!=e.pointerType)return true}else if(e.pointerType!="mouse")return true;return false};e.fn.imageLightbox=function(r){var r=e.extend({selector:'id="imagelightbox"',allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,preloadNext:true,enableKeyboard:true,quitOnEnd:false,quitOnImgClick:false,quitOnDocClick:true,onStart:false,onEnd:false,onLoadStart:false,onLoadEnd:false},r),i=e([]),l=e(),c=e(),h=0,p=0,d=0,v=false,m=function(t){return e(t).prop("tagName").toLowerCase()=="a"&&(new RegExp(".("+r.allowedTypes+")$","i")).test(e(t).attr("href"))},g=function(){if(!c.length)return true;var n=e(t).width()*.8,r=e(t).height()*.9,i=new Image;i.src=c.attr("src");i.onload=function(){h=i.width;p=i.height;if(h>n||p>r){var s=h/p>n/r?h/n:p/r;h/=s;p/=s}c.css({width:h+"px",height:p+"px",top:(e(t).height()-p)/2+"px",left:(e(t).width()-h)/2+"px"})}},y=function(t){if(v)return false;t=typeof t==="undefined"?false:t=="left"?1:-1;if(c.length){if(t!==false&&(i.length<2||r.quitOnEnd===true&&(t===-1&&i.index(l)==0||t===1&&i.index(l)==i.length-1))){w();return false}var n={opacity:0};if(s)o(c,100*t-d+"px",r.animationSpeed/1e3);else n.left=parseInt(c.css("left"))+100*t+"px";c.animate(n,r.animationSpeed,function(){b()});d=0}v=true;if(r.onLoadStart!==false)r.onLoadStart();setTimeout(function(){c=e("<img "+r.selector+" />").attr("src",l.attr("href")).load(function(){c.appendTo("body");g();var n={opacity:1};c.css("opacity",0);if(s){o(c,-100*t+"px",0);setTimeout(function(){o(c,0+"px",r.animationSpeed/1e3)},50)}else{var u=parseInt(c.css("left"));n.left=u+"px";c.css("left",u-100*t+"px")}c.animate(n,r.animationSpeed,function(){v=false;if(r.onLoadEnd!==false)r.onLoadEnd()});if(r.preloadNext){var a=i.eq(i.index(l)+1);if(!a.length)a=i.eq(0);e("<img />").attr("src",a.attr("href")).load()}}).error(function(){if(r.onLoadEnd!==false)r.onLoadEnd()});var n=0,u=0,p=0;c.on(a?"pointerup MSPointerUp":"click",function(e){e.preventDefault();if(r.quitOnImgClick){w();return false}if(f(e.originalEvent))return true;var t=(e.pageX||e.originalEvent.pageX)-e.target.offsetLeft;l=i.eq(i.index(l)-(h/2>t?1:-1));if(!l.length)l=i.eq(h/2>t?i.length:0);y(h/2>t?"left":"right")}).on("touchstart pointerdown MSPointerDown",function(e){if(!f(e.originalEvent)||r.quitOnImgClick)return true;if(s)p=parseInt(c.css("left"));n=e.originalEvent.pageX||e.originalEvent.touches[0].pageX}).on("touchmove pointermove MSPointerMove",function(e){if(!f(e.originalEvent)||r.quitOnImgClick)return true;e.preventDefault();u=e.originalEvent.pageX||e.originalEvent.touches[0].pageX;d=n-u;if(s)o(c,-d+"px",0);else c.css("left",p-d+"px")}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(e){if(!f(e.originalEvent)||r.quitOnImgClick)return true;if(Math.abs(d)>50){l=i.eq(i.index(l)-(d<0?1:-1));if(!l.length)l=i.eq(d<0?i.length:0);y(d>0?"right":"left")}else{if(s)o(c,0+"px",r.animationSpeed/1e3);else c.animate({left:p+"px"},r.animationSpeed/2)}})},r.animationSpeed+100)},b=function(){if(!c.length)return false;c.remove();c=e()},w=function(){if(!c.length)return false;c.animate({opacity:0},r.animationSpeed,function(){b();v=false;if(r.onEnd!==false)r.onEnd()})};e(t).on("resize",g);if(r.quitOnDocClick){e(n).on(u?"touchend":"click",function(t){if(c.length&&!e(t.target).is(c))w()})}if(r.enableKeyboard){e(n).on("keyup",function(e){if(!c.length)return true;e.preventDefault();if(e.keyCode==27)w();if(e.keyCode==37||e.keyCode==39){l=i.eq(i.index(l)-(e.keyCode==37?1:-1));if(!l.length)l=i.eq(e.keyCode==37?i.length:0);y(e.keyCode==37?"left":"right")}})}e(n).on("click",this.selector,function(t){if(!m(this))return true;t.preventDefault();if(v)return false;v=false;if(r.onStart!==false)r.onStart();l=e(this);y()});this.each(function(){if(!m(this))return true;i=i.add(e(this))});this.switchImageLightbox=function(e){var t=i.eq(e);if(t.length){var n=i.index(l);l=t;y(e<n?"left":"right")}return this};this.quitImageLightbox=function(){w();return this};return this}})(jQuery,window,document);

// fitvids
!function(t){"use strict";t.fn.fitVids=function(e){var i={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var r=document.head||document.getElementsByTagName("head")[0],a=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}",d=document.createElement("div");d.innerHTML='<p>x</p><style id="fit-vids-style">'+a+"</style>",r.appendChild(d.childNodes[1])}return e&&t.extend(i,e),this.each(function(){var e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];i.customSelector&&e.push(i.customSelector);var r=".fitvidsignore";i.ignore&&(r=r+", "+i.ignore);var a=t(this).find(e.join(","));a=a.not("object object"),a=a.not(r),a.each(function(){var e=t(this);if(!(e.parents(r).length>0||"embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length)){e.css("height")||e.css("width")||!isNaN(e.attr("height"))&&!isNaN(e.attr("width"))||(e.attr("height",9),e.attr("width",16));var i="object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height(),a=isNaN(parseInt(e.attr("width"),10))?e.width():parseInt(e.attr("width"),10),d=i/a;if(!e.attr("name")){var o="fitvid"+t.fn.fitVids._count;e.attr("name",o),t.fn.fitVids._count++}e.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*d+"%"),e.removeAttr("height").removeAttr("width")}})})},t.fn.fitVids._count=0}(window.jQuery||window.Zepto);

jQuery(document).ready(function($) {

/*  To top button
/* ------------------------------------ */
	$(function(){$("#back-top").hide()}),$(function(){$(window).scroll(function(){$(this).scrollTop()>1000?$("#back-top").fadeIn():$("#back-top").fadeOut()}),$("#back-top a").click(function(){return $("body,html").animate({scrollTop:0},800),!1})});
	/*
	if (document.documentElement.clientWidth > 719 ) { // not on mobiles
		$(window).scroll(function(){var e=0;var t=false;var n=$(window).scrollTop();if($(".site-main").offset().top<n){$(".site-top").addClass("stickybar");t=true}else{$(".site-top").removeClass("stickybar")}})
		$(window).scroll(function(){var e=0;var t=false;var n=$(window).scrollTop();if($(".site-main").offset().top<n){$(".site-main").addClass("sticky-nudge");$("#wpadminbar").slideUp(250);t=true}else{$(".site-main").removeClass("sticky-nudge");$("#wpadminbar").slideDown(250);}})
	}
	*/

/*  ImageLightbox.js settings
/* ------------------------------------ */	
	$( function() {
		
		// OVERLAY
		overlayOn = function() {
			$( '<div id="imagelightbox-overlay"></div>' ).appendTo( 'body' );
		},
		overlayOff = function() {
			$( '#imagelightbox-overlay' ).remove();
		},

		// ARROWS
		arrowsOn = function( instance, selector ) {
			var $arrows = $( '<button type="button" class="imagelightbox-arrow imagelightbox-arrow-left"></button><button type="button" class="imagelightbox-arrow imagelightbox-arrow-right"></button>' );

			$arrows.appendTo( 'body' );

			$arrows.on( 'click touchend', function( e ) {
				e.preventDefault();
					var $this	= $( this ),
					$target	= $( selector + '[href="' + $( '#imagelightbox' ).attr( 'src' ) + '"]' ),
					index	= $target.index( selector );
					if( $this.hasClass( 'imagelightbox-arrow-left' ) )
				{
					index = index - 1;
					if( !$( selector ).eq( index ).length )
						index = $( selector ).length;
				}
				else {
					index = index + 1;
					if( !$( selector ).eq( index ).length )
						index = 0;
				}
				instance.switchImageLightbox( index );
				return false;
			});
		},
		arrowsOff = function() {
			$( '.imagelightbox-arrow' ).remove();
		};

		var selectorG = 'a[data-imagelightbox="g"]';
		var instanceG = $( selectorG ).imageLightbox({
			onStart:		function(){ arrowsOn( instanceG, selectorG ); overlayOn(); $('.site-top').css('opacity','.1'); },
			onEnd:			function(){ arrowsOff(); overlayOff(); $('.site-top').css('opacity','1') },
			onLoadEnd:	 	function(){ $( '.imagelightbox-arrow' ).css( 'display', 'block' ); }
		});

	});

	// Fitvids
	$('.entry-content').fitVids();
		
});